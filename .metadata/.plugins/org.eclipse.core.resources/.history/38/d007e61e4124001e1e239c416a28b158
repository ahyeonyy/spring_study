<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>신상 도서 목록
	</title>
</head>
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
	$(function () {
		$.ajax({
			url: "/newBook",
			method: "GET",
			success: function (arr) {
				$.each(arr, function () {
					var title = this.title;
					var link = this.link;
					var li = $("<li></li>");
					var a = $("<a></a>").html(this.title);
					$(a).attr("href", link);
					$(li).append(a);
					$(li).addClass("list-group-item")
					$("#list").append(li);
				})
			}
		});

		function sendAjaxRequest() {
			$.ajax({
				url: "/seat",
				method: "GET",
				success: function (seat) {
					$("#seatinfo").text(seat);
				},
				error: function (xhr, status, error) {
					console.log("에러:", error);
				}
			});
		}

		// 초기에 한 번 요청 보내기
		sendAjaxRequest();

		// 5초마다 요청 보내기
		setInterval(sendAjaxRequest, 5000);
	});


</script>

<body>
	<h2>새로운 도서 정보</h2>
	<hr />
	<h2>잔여좌석 : <span id="seatinfo"></span>></h2>
	<ul id="list" class="list-group list-group-flush"></ul>

</body>

</html>